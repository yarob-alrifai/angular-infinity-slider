import './polyfills.server.mjs';
import{A as p,B as V,G as N,J as B,L,M as j,N as q,Q as $,W,a as u,b as g,c as C,d,e as F,f as T,g as n,h as x,i as S,j as M,k as I,l as b,m as O,n as D,o as E,p as a,q as l,r as h,s as k,t as _,u as v,v as y,w as R,x as c,y as P,z as w}from"./chunk-CLOA7N7F.mjs";var G=["dialog"],J=["carouselList"],K=s=>({disabled:s});function ee(s,r){if(s&1&&(a(0,"li",12)(1,"div",13),c(2),l()()),s&2){let f=r.$implicit,e=r.$index,t=v(2);d(),I("bigger",t.isCenterItem(e)),d(),w(" ",f.key," ")}}function te(s,r){if(s&1&&D(0,ee,3,3,"li",12,O),s&2){let f=v();E(f.items())}}function ie(s,r){s&1&&(a(0,"li"),c(1,"There are no Items !"),l())}function ne(s,r){s&1&&(a(0,"p"),c(1,"Congratulations! You've selected the winning block."),l())}function se(s,r){s&1&&(a(0,"p"),c(1,"Please try again."),l())}var z=(()=>{let r=class r{constructor(e){this.renderer=e,this.differenceBetweenRightAndSelected=n(0),this.itemsNumber=n(50),this.visibleItemsCount=n(5),this.winningBlock=n(15),this.endSlicee=n(this.visibleItemsCount()+2),this.ourDate=n(Array.from({length:this.itemsNumber()},(t,i)=>({key:i+1}))),this.items=n([]),this.currentIndex=n(Math.floor(this.visibleItemsCount()/2)),this.selectedItemIndex=n(-1),this.isWinner=n(!1),this.dialogTitle=n(""),this.showDialog=n(!1),this.enableButton=n(!0),this.index=n(this.currentIndex()),this.counterForChangeSpeed=n(0),this.counterForDoOneCycle=n(0),this.stepSpeed=n(.05),this.maxSpeed=n(.1),this.minSpeed=n(.6),this.currentSpeed=n(this.minSpeed()),this.selectedItemOffset=n(0),this.dialog=x("dialog"),this.carouselList=x("carouselList")}ngOnInit(){this.initCarousel()}initCarousel(){this.setUpItems(),this.applyStyles(),this.firstRotateCarousel()}setUpItems(){this.items.set(this.ourDate().slice(0,this.endSlicee()))}applyStyles(){Array.from(this.carouselList()?.nativeElement.querySelectorAll(".carousel__cell")).forEach(t=>{this.renderer.setStyle(t,"flex",`0 0 ${100/this.visibleItemsCount()}%`)})}firstRotateCarousel(){let e=`translateX(${-(this.currentIndex()-Math.floor(this.visibleItemsCount()/2))*100/this.visibleItemsCount()}%)`;this.renderer.setStyle(this.carouselList()?.nativeElement,"transform",e)}start(){this.inItVariable(),this.shiftAndAppendItem(),this.applyStyles(),this.performFullRotation()}inItVariable(){this.index.update(e=>e%this.itemsNumber()),this.incrementIndex(),this.enableButton.set(!1),this.counterForDoOneCycle.set(0),this.currentSpeed.set(.5),this.counterForChangeSpeed.set(0),this.selectedItemIndex.set(this.getRandomIndex()),this.isWinner.set(this.selectedItemIndex()===this.winningBlock()),this.dialogTitle.set(this.isWinner()?"Congratulations!":"Oops!"),this.selectedItemOffset.set(this.selectedItemIndex()),console.log("selected item: "+this.selectedItemIndex())}shiftAndAppendItem(){let e=this.ourDate()[(this.index()+4)%this.itemsNumber()];e&&this.items.update(t=>[...t,e])}performFullRotation(){let e=this.calculateTransformValue(this.currentIndex()+1);this.applyTransform(e),this.scheduleTransformReset(),this.scheduleNextRotation()}calculateTransformValue(e){return`translateX(${-(e-Math.floor(this.visibleItemsCount()/2))*100/this.visibleItemsCount()}%)`}applyTransform(e){this.renderer.setStyle(this.carouselList()?.nativeElement,"transition",""),this.renderer.setStyle(this.carouselList()?.nativeElement,"transition",`transform ${this.currentSpeed()}s ease-in-out`),this.renderer.setStyle(this.carouselList()?.nativeElement,"transform",e)}scheduleTransformReset(){let e=performance.now(),t=this.currentSpeed()*1e3,i=o=>{if(o-e>=t){let A=this.calculateTransformValue(this.currentIndex());this.resetTransform(A),this.removeFirstItem()}else requestAnimationFrame(i)};requestAnimationFrame(i)}scheduleNextRotation(){let e=performance.now(),t=this.currentSpeed()*1500,i=o=>{o-e>=t?this.handleEndOfRotation():requestAnimationFrame(i)};requestAnimationFrame(i)}handleEndOfRotation(){if(this.hasCompletedCycle()){this.resetCycle(),this.updateIndexForSelectedItem(),this.calculateDifferenceBetweenSelectedAndCurrent(),this.alignToSelectedItem();return}this.incrementCycleCounter(),this.adjustSpeedIfNecessary(),this.move()}hasCompletedCycle(){return this.counterForDoOneCycle()===this.itemsNumber()}resetCycle(){this.counterForChangeSpeed.set(0),this.index.update(e=>e%this.itemsNumber())}updateIndexForSelectedItem(){this.selectedItemIndex()<=this.index()&&this.selectedItemOffset.set(this.selectedItemIndex()+this.itemsNumber())}calculateDifferenceBetweenSelectedAndCurrent(){this.differenceBetweenRightAndSelected.set(Math.round((this.selectedItemOffset()-this.index())/10))}alignToSelectedItem(){this.incrementIndex(),this.shiftAndAppendItem(),this.applyStyles(),this.animateCarousel(),this.scheduleAlignment()}incrementCycleCounter(){this.counterForDoOneCycle.update(e=>e+1)}adjustSpeedIfNecessary(){this.counterForChangeSpeed()===Math.round(this.itemsNumber()/10)&&(this.counterForChangeSpeed.set(0),this.currentSpeed.update(e=>Math.max(this.maxSpeed(),e-this.stepSpeed()))),this.counterForChangeSpeed.update(e=>e+1)}move(){this.incrementIndex(),this.shiftAndAppendItem(),this.applyStyles(),this.performFullRotation()}incrementIndex(){this.index.update(e=>e+1)}animateCarousel(){let e=this.calculateTransformValue(this.currentIndex()+1);this.applyTransform(e);let t=performance.now(),i=this.currentSpeed()*1e3,o=m=>{if(m-t>=i){let Y=this.calculateTransformValue(this.currentIndex());this.resetTransform(Y),this.removeFirstItem()}else requestAnimationFrame(o)};requestAnimationFrame(o)}scheduleAlignment(){let e=performance.now(),t=this.currentSpeed()*1500,i=o=>{o-e>=t?(this.handleSpeedAdjustment(),this.checkAlignmentOrEnd()):requestAnimationFrame(i)};requestAnimationFrame(i)}handleSpeedAdjustment(){this.shouldAdjustSpeed()&&(this.resetSpeedCounter(),this.increaseSpeed()),this.incrementSpeedCounter()}shouldAdjustSpeed(){return this.counterForChangeSpeed()===this.differenceBetweenRightAndSelected()}resetSpeedCounter(){this.counterForChangeSpeed.set(0)}increaseSpeed(){this.currentSpeed.update(e=>Math.min(this.minSpeed(),e+this.stepSpeed()))}checkAlignmentOrEnd(){this.isNotAlignedWithSelectedItem()?this.alignToSelectedItem():this.finalizeAlignment()}isNotAlignedWithSelectedItem(){return this.index()!==this.selectedItemOffset()}finalizeAlignment(){this.showDialog.set(!0),this.openDialog(),this.enableButton.set(!0)}incrementSpeedCounter(){this.counterForChangeSpeed.update(e=>e+1)}resetTransform(e){this.renderer.setStyle(this.carouselList()?.nativeElement,"transition","none"),this.renderer.setStyle(this.carouselList()?.nativeElement,"transform",e)}removeFirstItem(){this.items().shift()}getRandomIndex(){return(Math.floor(Math.random()*10)+this.winningBlock())%this.itemsNumber()}isCenterItem(e){let t=this.calculateCenterIndex(),i=this.getCurrentCenterIndex();return this.isItemAtCenter(e,i,t)}calculateCenterIndex(){return Math.floor(this.visibleItemsCount()/Math.floor(this.visibleItemsCount()/2))}getCurrentCenterIndex(){return this.visibleItemsCount()<5?(this.currentIndex()-3+this.calculateCenterIndex())%this.ourDate().length:(this.currentIndex()-2+this.calculateCenterIndex())%this.ourDate().length}isItemAtCenter(e,t,i){return this.items()[0].key===0?e===t+1:e===t}closeDialog(){this.showDialog.set(!1),(this.dialog()?.nativeElement).close()}openDialog(){(this.dialog()?.nativeElement).showModal()}};r.\u0275fac=function(t){return new(t||r)(F(T))},r.\u0275cmp=u({type:r,selectors:[["app-slider"]],viewQuery:function(t,i){t&1&&(y(i.dialog,G,5),y(i.carouselList,J,5)),t&2&&R(2)},standalone:!0,features:[p],decls:23,vars:10,consts:[["carouselList",""],["dialog",""],[1,"carousel"],[1,"carousel__scene"],[1,"carousel__list"],[1,"arrow-container"],[1,"arrow"],[1,"carousel__controls"],[1,"button-container"],[3,"click","disabled","ngClass"],[1,"dialog"],[2,"width","8rem",3,"click"],[1,"carousel__cell"],[1,"carousel__item"]],template:function(t,i){if(t&1){let o=k();a(0,"div",2)(1,"div",3)(2,"ul",4,0),S(4,te,2,0)(5,ie,2,0,"li"),l()(),a(6,"div",5),h(7,"div",6),l(),h(8,"div",7),a(9,"div",8)(10,"button",9),_("click",function(){return g(o),C(i.start())}),c(11,"Start"),l()()(),a(12,"dialog",10,1)(14,"h1"),c(15),l(),a(16,"p"),c(17),l(),S(18,ne,2,0,"p")(19,se,2,0,"p"),a(20,"div",8)(21,"button",11),_("click",function(){return g(o),C(i.closeDialog())}),c(22,"Close"),l()()()}t&2&&(d(4),b(i.items()?4:5),d(6),M("disabled",!i.enableButton())("ngClass",V(8,K,!i.enableButton())),d(2),I("show",i.showDialog()),d(3),P(i.dialogTitle()),d(2),w("The index for your selected item: ",i.selectedItemIndex(),""),d(),b(i.isWinner()?18:19))},dependencies:[L],styles:[".carousel[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:66.666667%;margin:20px auto 0;padding:16px;border-width:2px;border-color:#e5e7eb;box-shadow:0 4px 6px #0000001a;border-radius:.375rem}.carousel__scene[_ngcontent-%COMP%]{width:100%;height:100%;margin-top:16px;margin-bottom:16px}.carousel__list[_ngcontent-%COMP%]{display:flex;list-style:none;padding:0;margin:0}.carousel__controls[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px}button[_ngcontent-%COMP%]{background-color:#28a745;width:80px;color:#fff;font-weight:700;border-radius:.375rem;box-shadow:0 4px 6px #0000001a;padding:8px;cursor:pointer;border:none}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-top:16px;margin-bottom:16px}.button-container[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{background-color:#41e066;cursor:not-allowed;opacity:.6}.carousel__item[_ngcontent-%COMP%]{padding:12px;box-shadow:0 4px 6px #0000001a;border-radius:.375rem;border-width:2px;border-color:#e5e7eb;width:90px;text-align:center;font-size:3rem;font-weight:700;transition:transform .3s ease-in-out}.carousel__item.bigger[_ngcontent-%COMP%]{transform:scale(1.5)}dialog[_ngcontent-%COMP%]{border-radius:20px;border:none;text-align:center;opacity:0;transition:transform .3s ease-in-out,opacity .3s ease-in-out}.dialog.show[_ngcontent-%COMP%]{opacity:1}dialog[_ngcontent-%COMP%]::backdrop{background-color:#afacac40}.arrow-container[_ngcontent-%COMP%]{position:absolute;top:10px;left:50%;transform:translate(-50%);pointer-events:none}.arrow[_ngcontent-%COMP%]{width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid black}.carousel__cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-align:center;box-sizing:border-box;width:20%;height:100px;transition:filter .3s ease,transform .3s ease}"]});let s=r;return s})();var Q=(()=>{let r=class r{constructor(){this.title="angular-slider"}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=u({type:r,selectors:[["app-root"]],standalone:!0,features:[p],decls:1,vars:0,template:function(t,i){t&1&&h(0,"app-slider")},dependencies:[z]});let s=r;return s})();var U=[];var X={providers:[N({eventCoalescing:!0}),W(U),q()]};var re={providers:[$()]},H=B(X,re);var oe=()=>j(Q,H),Ae=oe;export{Ae as a};
