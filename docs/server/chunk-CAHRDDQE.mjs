import './polyfills.server.mjs';
import{E as V,H as F,J as L,K as A,L as N,O as Q,U as $,a as u,b as g,c as x,d as c,e as O,f as T,g as a,h as _,i as C,j as I,k as D,l as E,m as P,n as s,o as l,p as m,q as k,r as v,s as b,t as y,u as w,v as S,w as d,x as R,y as M,z as h}from"./chunk-VAGR5W5Q.mjs";var H=["dialog"],Y=["carouselList"];function Z(o,n){if(o&1&&(s(0,"li",12)(1,"div",13),d(2),l()()),o&2){let p=n.$implicit,e=n.$index,t=b(2);c(),C("bigger",t.isCenterItem(e)),c(),M(" ",p.key," ")}}function G(o,n){if(o&1&&E(0,Z,3,3,"li",12,D),o&2){let p=b();P(p.items())}}function J(o,n){o&1&&(s(0,"li"),d(1,"There are no Items !"),l())}function K(o,n){o&1&&(s(0,"p"),d(1,"Congratulations! You've selected the winning block."),l())}function U(o,n){o&1&&(s(0,"p"),d(1,"Please try again."),l())}var j=(()=>{let n=class n{constructor(e){this.renderer=e,this.transformValue=a("translateX(0)"),this.itemsNumber=50,this.visibleItemsCount=5,this.winningBlock=14,this.ourDate=a(Array.from({length:this.itemsNumber},(t,i)=>({key:i+1}))),this.items=a([]),this.helper=this.ourDate(),this.data=[...this.ourDate()],this.currentIndex=a(Math.floor(this.visibleItemsCount/2)),this.isRunning=a(!1),this.selectedItemIndex=a(-1),this.isWinner=a(!1),this.dialogTitle=a(""),this.showDialog=a(!1)}ngOnInit(){this.initCarousel()}add(){this.currentIndex.update(t=>t+1);let e=this.data.shift();this.data.length==0&&this.data.push(...this.helper),e&&this.items.update(t=>[...t,e]),this.applyStyles(),this.rotateCarousel()}initCarousel(){this.items.set(this.ourDate().slice(0,this.visibleItemsCount)),this.data.splice(0,this.visibleItemsCount),this.applyStyles(),this.rotateCarousel()}applyStyles(){Array.from(this.carouselList.nativeElement.querySelectorAll(".carousel__cell")).forEach(t=>{this.renderer.setStyle(t,"flex",`0 0 ${100/this.visibleItemsCount}%`)})}rotateCarousel(){let e=`translateX(${-(this.currentIndex()-Math.floor(this.visibleItemsCount/2))*100/this.visibleItemsCount}%)`;this.renderer.setStyle(this.carouselList.nativeElement,"transform",e)}_rotateCarousel(){let e=`translateX(${-(this.currentIndex()-Math.floor(this.visibleItemsCount/2))*100/this.visibleItemsCount}%)`;this.renderer.setStyle(this.carouselList.nativeElement,"transition","none"),this.renderer.setStyle(this.carouselList.nativeElement,"transform",e),setTimeout(()=>{this.renderer.setStyle(this.carouselList.nativeElement,"transition","")},20)}startSlider(){console.log("================================================"),console.log("Slider started"),this.isRunning.set(!0),this.selectedItemIndex.set(this.getRandomIndex()),console.log("Selected item index:",this.selectedItemIndex()),this.performFullRotation()}getRandomIndex(){return Math.floor(Math.random()*10)+this.winningBlock}performFullRotation(){let e=150;console.log("Performing full rotation");let t=this.ourDate().length,i=0,r=setInterval(()=>{if(!this.isRunning()){clearInterval(r);return}e=Math.max(10,e-1),this.add(),i++,i>=t&&(clearInterval(r),this.alignToSelectedItem())},e)}alignToSelectedItem(){let e=200;console.log("Aligning to selected item");let t=this.calculateOffset(),i=setInterval(()=>{if(!this.isRunning()){clearInterval(i);return}e=Math.min(300,e+1),this.currentIndex()===t?(clearInterval(i),this.isRunning.set(!1),setTimeout(()=>{this.selectedItemIndex()===14&&this.isWinner.set(!0),this.dialogTitle.set(this.isWinner()?"Congratulations!":"Oops!"),this.showDialog.set(!0),this.openDialog(),this.items.set(this.helper.slice(0,this.selectedItemIndex()+Math.round(this.visibleItemsCount/2))),this.currentIndex.update(f=>f%this.itemsNumber),this._rotateCarousel()},500)):this.add()},e)}calculateOffset(){let e=-1;return e=Math.floor(this.currentIndex()/this.itemsNumber)*this.itemsNumber+this.selectedItemIndex(),console.log("selected Item Index : "+this.selectedItemIndex()),e<this.currentIndex()&&(e=Math.floor(this.currentIndex()/this.itemsNumber)*(this.itemsNumber*2)+this.selectedItemIndex()),e}isCenterItem(e){let t=Math.floor(this.visibleItemsCount/Math.floor(this.visibleItemsCount/2)),i=0;return this.visibleItemsCount<5?i=(this.currentIndex()-3+t)%this.helper.length:i=(this.currentIndex()-2+t)%this.helper.length,e===i}closeDialog(){this.showDialog.set(!1),this.dialog.nativeElement.close()}openDialog(){this.dialog.nativeElement.showModal()}};n.\u0275fac=function(t){return new(t||n)(O(T))},n.\u0275cmp=u({type:n,selectors:[["app-slider"]],viewQuery:function(t,i){if(t&1&&(y(H,5),y(Y,7)),t&2){let r;w(r=S())&&(i.dialog=r.first),w(r=S())&&(i.carouselList=r.first)}},standalone:!0,features:[h],decls:23,vars:6,consts:[["carouselList",""],["dialog",""],[1,"carousel"],[1,"carousel__scene"],[1,"carousel__list"],[1,"arrow-container"],[1,"arrow"],[1,"carousel__controls"],[1,"button-container"],[3,"click"],[1,"dialog"],[2,"width","8rem",3,"click"],[1,"carousel__cell"],[1,"carousel__item"]],template:function(t,i){if(t&1){let r=k();s(0,"div",2)(1,"div",3)(2,"ul",4,0),_(4,G,2,0)(5,J,2,0,"li"),l()(),s(6,"div",5),m(7,"div",6),l(),m(8,"div",7),s(9,"div",8)(10,"button",9),v("click",function(){return g(r),x(i.startSlider())}),d(11,"Start"),l()()(),s(12,"dialog",10,1)(14,"h1"),d(15),l(),s(16,"p"),d(17),l(),_(18,K,2,0,"p")(19,U,2,0,"p"),s(20,"div",8)(21,"button",11),v("click",function(){return g(r),x(i.closeDialog())}),d(22,"Close"),l()()()}t&2&&(c(4),I(i.items()?4:5),c(8),C("show",i.showDialog()),c(3),R(i.dialogTitle()),c(2),M("The index for your selected item: ",i.selectedItemIndex(),""),c(),I(i.isWinner()?18:19))},dependencies:[L],styles:[".carousel[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:66.666667%;margin:20px auto 0;padding:16px;border-width:2px;border-color:#e5e7eb;box-shadow:0 4px 6px #0000001a;border-radius:.375rem}.carousel__scene[_ngcontent-%COMP%]{width:100%;height:100%;margin-top:16px;margin-bottom:16px}.carousel__list[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease-in-out;list-style:none;padding:0;margin:0}.carousel__controls[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px}button[_ngcontent-%COMP%]{background-color:#28a745;width:80px;color:#fff;font-weight:700;border-radius:.375rem;box-shadow:0 4px 6px #0000001a;padding:8px;cursor:pointer;border:none}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-top:16px;margin-bottom:16px}.carousel__item[_ngcontent-%COMP%]{padding:12px;box-shadow:0 4px 6px #0000001a;border-radius:.375rem;border-width:2px;border-color:#e5e7eb;width:90px;text-align:center;font-size:3rem;font-weight:700;transition:transform .3s ease-in-out}.carousel__item.bigger[_ngcontent-%COMP%]{transform:scale(1.5)}dialog[_ngcontent-%COMP%]{border-radius:20px;border:none;text-align:center;opacity:0;transition:transform .3s ease-in-out,opacity .3s ease-in-out}.dialog.show[_ngcontent-%COMP%]{opacity:1}dialog[_ngcontent-%COMP%]::backdrop{background-color:#afacac40}.arrow-container[_ngcontent-%COMP%]{position:absolute;top:10px;left:50%;transform:translate(-50%);pointer-events:none}.arrow[_ngcontent-%COMP%]{width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid black}.carousel__cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-align:center;box-sizing:border-box;width:20%;height:100px;transition:filter .3s ease,transform .3s ease}"],data:{animation:[]}});let o=n;return o})();var W=(()=>{let n=class n{constructor(){this.title="angular-slider"}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u({type:n,selectors:[["app-root"]],standalone:!0,features:[h],decls:1,vars:0,template:function(t,i){t&1&&m(0,"app-slider")},dependencies:[j]});let o=n;return o})();var q=[];var B={providers:[V({eventCoalescing:!0}),$(q),N()]};var ee={providers:[Q()]},X=F(B,ee);var te=()=>A(W,X),be=te;export{be as a};
