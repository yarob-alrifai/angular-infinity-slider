import './polyfills.server.mjs';
import{A as h,B as V,G as B,J as L,L as N,M as A,N as Q,O as $,R as W,X as j,a as u,b as g,c as x,d,e as O,f as P,g as s,h as C,i as T,j as _,k as b,l as D,m as E,n as k,o as l,p as a,q as m,r as R,s as I,t as v,u as y,v as w,w as S,x as c,y as F,z as M}from"./chunk-KIHQHBDR.mjs";var G=["dialog"],J=["carouselList"],K=n=>({disabled:n});function U(n,o){if(n&1&&(l(0,"li",12)(1,"div",13),c(2),a()()),n&2){let p=o.$implicit,e=o.$index,t=v(2);d(),_("bigger",t.isCenterItem(e)),d(),M(" ",p.key," ")}}function ee(n,o){if(n&1&&E(0,U,3,3,"li",12,D),n&2){let p=v();k(p.items())}}function te(n,o){n&1&&(l(0,"li"),c(1,"There are no Items !"),a())}function ie(n,o){n&1&&(l(0,"p"),c(1,"Congratulations! You've selected the winning block."),a())}function ne(n,o){n&1&&(l(0,"p"),c(1,"Please try again."),a())}var q=(()=>{let o=class o{constructor(e){this.renderer=e,this.transformValue=s("translateX(0)"),this.itemsNumber=50,this.visibleItemsCount=5,this.winningBlock=14,this.ourDate=s(Array.from({length:this.itemsNumber},(t,i)=>({key:i+1}))),this.items=s([]),this.helper=this.ourDate(),this.data=[...this.ourDate()],this.currentIndex=s(Math.floor(this.visibleItemsCount/2)),this.isRunning=s(!1),this.selectedItemIndex=s(-1),this.isWinner=s(!1),this.dialogTitle=s(""),this.showDialog=s(!1),this.enableButton=s(!0)}ngOnInit(){this.initCarousel()}add(){this.currentIndex.update(t=>t+1);let e=this.data.shift();this.data.length==0&&this.data.push(...this.helper),e&&this.items.update(t=>[...t,e]),this.applyStyles(),this.rotateCarousel()}initCarousel(){this.items.set(this.ourDate().slice(0,this.visibleItemsCount)),this.data.splice(0,this.visibleItemsCount),this.applyStyles(),this.rotateCarousel()}applyStyles(){Array.from(this.carouselList.nativeElement.querySelectorAll(".carousel__cell")).forEach(t=>{this.renderer.setStyle(t,"flex",`0 0 ${100/this.visibleItemsCount}%`)})}rotateCarousel(){let e=`translateX(${-(this.currentIndex()-Math.floor(this.visibleItemsCount/2))*100/this.visibleItemsCount}%)`;this.renderer.setStyle(this.carouselList.nativeElement,"transform",e)}_rotateCarousel(){let e=`translateX(${-(this.currentIndex()-Math.floor(this.visibleItemsCount/2))*100/this.visibleItemsCount}%)`;this.renderer.setStyle(this.carouselList.nativeElement,"transition","none"),this.renderer.setStyle(this.carouselList.nativeElement,"transform",e),setTimeout(()=>{this.renderer.setStyle(this.carouselList.nativeElement,"transition","")},20)}startSlider(){console.log("================================================"),console.log("Slider started"),this.enableButton.set(!1),this.selectedItemIndex.set(-1),this.isWinner.set(!1),this.isRunning.set(!0),this.selectedItemIndex.set(this.getRandomIndex()),console.log("Selected item index:",this.selectedItemIndex()),this.performFullRotation()}getRandomIndex(){return Math.floor(Math.random()*10)+this.winningBlock}performFullRotation(){let e=150;console.log("Performing full rotation");let t=this.ourDate().length,i=0,r=setInterval(()=>{if(!this.isRunning()){clearInterval(r);return}e=Math.max(10,e-1),this.add(),i++,i>=t&&(clearInterval(r),this.alignToSelectedItem())},e)}alignToSelectedItem(){let e=200;console.log("Aligning to selected item");let t=this.calculateOffset(),i=setInterval(()=>{if(!this.isRunning()){clearInterval(i);return}e=Math.min(300,e+1),this.currentIndex()===t?(clearInterval(i),this.isRunning.set(!1),setTimeout(()=>{this.selectedItemIndex()===14&&this.isWinner.set(!0),this.dialogTitle.set(this.isWinner()?"Congratulations!":"Oops!"),this.showDialog.set(!0),this.openDialog(),this.enableButton.set(!0),this.items.set(this.helper.slice(0,this.selectedItemIndex()+Math.round(this.visibleItemsCount/2))),this.currentIndex.update(f=>f%this.itemsNumber),this._rotateCarousel()},500)):this.add()},e)}calculateOffset(){let e=-1;return e=Math.floor(this.currentIndex()/this.itemsNumber)*this.itemsNumber+this.selectedItemIndex(),console.log("selected Item Index : "+this.selectedItemIndex()),e<this.currentIndex()&&(e=Math.floor(this.currentIndex()/this.itemsNumber)*(this.itemsNumber*2)+this.selectedItemIndex()),e}isCenterItem(e){let t=Math.floor(this.visibleItemsCount/Math.floor(this.visibleItemsCount/2)),i=0;return this.visibleItemsCount<5?i=(this.currentIndex()-3+t)%this.helper.length:i=(this.currentIndex()-2+t)%this.helper.length,e===i}closeDialog(){this.showDialog.set(!1),this.dialog.nativeElement.close()}openDialog(){this.dialog.nativeElement.showModal()}};o.\u0275fac=function(t){return new(t||o)(O(P))},o.\u0275cmp=u({type:o,selectors:[["app-slider"]],viewQuery:function(t,i){if(t&1&&(y(G,5),y(J,7)),t&2){let r;w(r=S())&&(i.dialog=r.first),w(r=S())&&(i.carouselList=r.first)}},standalone:!0,features:[h],decls:23,vars:10,consts:[["carouselList",""],["dialog",""],[1,"carousel"],[1,"carousel__scene"],[1,"carousel__list"],[1,"arrow-container"],[1,"arrow"],[1,"carousel__controls"],[1,"button-container"],[3,"click","disabled","ngClass"],[1,"dialog"],[2,"width","8rem",3,"click"],[1,"carousel__cell"],[1,"carousel__item"]],template:function(t,i){if(t&1){let r=R();l(0,"div",2)(1,"div",3)(2,"ul",4,0),C(4,ee,2,0)(5,te,2,0,"li"),a()(),l(6,"div",5),m(7,"div",6),a(),m(8,"div",7),l(9,"div",8)(10,"button",9),I("click",function(){return g(r),x(i.startSlider())}),c(11,"Start"),a()()(),l(12,"dialog",10,1)(14,"h1"),c(15),a(),l(16,"p"),c(17),a(),C(18,ie,2,0,"p")(19,ne,2,0,"p"),l(20,"div",8)(21,"button",11),I("click",function(){return g(r),x(i.closeDialog())}),c(22,"Close"),a()()()}t&2&&(d(4),b(i.items()?4:5),d(6),T("disabled",!i.enableButton())("ngClass",V(8,K,!i.enableButton())),d(2),_("show",i.showDialog()),d(3),F(i.dialogTitle()),d(2),M("The index for your selected item: ",i.selectedItemIndex(),""),d(),b(i.isWinner()?18:19))},dependencies:[A,N],styles:[".carousel[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:66.666667%;margin:20px auto 0;padding:16px;border-width:2px;border-color:#e5e7eb;box-shadow:0 4px 6px #0000001a;border-radius:.375rem}.carousel__scene[_ngcontent-%COMP%]{width:100%;height:100%;margin-top:16px;margin-bottom:16px}.carousel__list[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease-in-out;list-style:none;padding:0;margin:0}.carousel__controls[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px}button[_ngcontent-%COMP%]{background-color:#28a745;width:80px;color:#fff;font-weight:700;border-radius:.375rem;box-shadow:0 4px 6px #0000001a;padding:8px;cursor:pointer;border:none}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-top:16px;margin-bottom:16px}.button-container[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{background-color:#41e066;cursor:not-allowed;opacity:.6}.carousel__item[_ngcontent-%COMP%]{padding:12px;box-shadow:0 4px 6px #0000001a;border-radius:.375rem;border-width:2px;border-color:#e5e7eb;width:90px;text-align:center;font-size:3rem;font-weight:700;transition:transform .3s ease-in-out}.carousel__item.bigger[_ngcontent-%COMP%]{transform:scale(1.5)}dialog[_ngcontent-%COMP%]{border-radius:20px;border:none;text-align:center;opacity:0;transition:transform .3s ease-in-out,opacity .3s ease-in-out}.dialog.show[_ngcontent-%COMP%]{opacity:1}dialog[_ngcontent-%COMP%]::backdrop{background-color:#afacac40}.arrow-container[_ngcontent-%COMP%]{position:absolute;top:10px;left:50%;transform:translate(-50%);pointer-events:none}.arrow[_ngcontent-%COMP%]{width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid black}.carousel__cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-align:center;box-sizing:border-box;width:20%;height:100px;transition:filter .3s ease,transform .3s ease}"],data:{animation:[]}});let n=o;return n})();var X=(()=>{let o=class o{constructor(){this.title="angular-slider"}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=u({type:o,selectors:[["app-root"]],standalone:!0,features:[h],decls:1,vars:0,template:function(t,i){t&1&&m(0,"app-slider")},dependencies:[q]});let n=o;return n})();var z=[];var H={providers:[B({eventCoalescing:!0}),j(z),$()]};var oe={providers:[W()]},Y=L(H,oe);var re=()=>Q(X,Y),Oe=re;export{Oe as a};
