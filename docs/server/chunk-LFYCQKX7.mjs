import './polyfills.server.mjs';
import{A as T,B as C,C as j,H as B,K as h,L as q,M as W,O as $,P as z,Q,T as X,Z as H,a as p,b as f,c as x,d as S,e as c,f as g,g as O,h as r,i as v,j as b,k,l as y,m as _,n as L,o as N,p as E,q as a,r as l,s as m,t as R,u as w,v as F,w as A,x as P,y as d,z as V}from"./chunk-OY2JSSUB.mjs";var Y=(()=>{let i=class i{openDialog(e){e.showModal()}closeDialog(e){e.close()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var Z=(()=>{let i=class i{constructor(){this.visibleItemsCount=r(5),this.itemsNumber=r(20),this.ourDate=r(Array.from({length:this.itemsNumber()},(e,t)=>({key:t+1}))),this.currentIndex=r(Math.floor(this.visibleItemsCount()/2)),this.endSlicee=r(this.visibleItemsCount()+2),this.index=r(this.currentIndex()),this.differenceBetweenRightAndSelected=r(0),this.winningBlock=r(10),this.selectedItemIndex=r(-1),this.isWinner=r(!1),this.dialogTitle=r(""),this.enableButton=r(!0),this.counterForChangeSpeed=r(0),this.counterForDoOneCycle=r(0),this.stepSpeed=r(.05),this.maxSpeed=r(.1),this.minSpeed=r(.6),this.currentSpeed=r(this.minSpeed()),this.selectedItemOffset=r(0),this.items=r([]),this.carouselList=null,this.showDialog=r(!1)}initCarousel(e,t){this.setCarouselList(e),this.setRenderer(t),this.putSevenItemsInTheCarousel(),this.applyStylesForNewItems(),this.rotateCarouselToStartedtIndex()}setCarouselList(e){this.carouselList=e}setRenderer(e){this.renderer=e}putSevenItemsInTheCarousel(){this.items.set(this.ourDate().slice(0,this.endSlicee()))}applyStylesForNewItems(){this.getCellsFromCarouselList().forEach(t=>this.setStyleForNewCell(t))}getCellsFromCarouselList(){return this.carouselList?Array.from(this.carouselList.querySelectorAll(".carousel__cell")):(console.error("Carousel list is not set."),[])}setStyleForNewCell(e){this.renderer.setStyle(e,"flex",`0 0 ${100/this.visibleItemsCount()}%`)}rotateCarouselToStartedtIndex(){if(!this.carouselList){console.error("Carousel list is not set.");return}this.renderer.setStyle(this.carouselList,"transform",this.getTransformValue())}getTransformValue(){return`translateX(${-(this.currentIndex()-Math.floor(this.visibleItemsCount()/2))*100/this.visibleItemsCount()}%)`}shiftAndAppendItem(){let e=this.ourDate()[(this.index()+4)%this.itemsNumber()];e&&this.items.update(t=>[...t,e])}start(){this.resetAllVariable(),this.shiftAndAppendItem(),this.applyStylesForNewItems(),this.performFullRotation()}resetAllVariable(){this.index.update(e=>e%this.itemsNumber()),this.incrementIndex(),this.enableButton.set(!1),this.counterForDoOneCycle.set(0),this.counterForChangeSpeed.set(0),this.currentSpeed.set(.5),this.showDialog.set(!1),this.selectedItemIndex.set(this.getRandomIndex()),this.selectedItemOffset.set(this.selectedItemIndex()),this.isWinner.set(this.selectedItemIndex()===this.winningBlock()),this.dialogTitle.set(this.isWinner()?"Congratulations!":"Oops!"),this.printSlectedItemIndexInTheConsol()}incrementIndex(){this.index.update(e=>e+1)}getRandomIndex(){return(Math.floor(Math.random()*10)+this.winningBlock())%this.itemsNumber()}printSlectedItemIndexInTheConsol(){console.log("selected item: "+this.selectedItemIndex())}performFullRotation(){let e=this.calculateTransformValue(this.currentIndex()+1);this.applyTransform(e),this.scheduleTransformReset(),this.scheduleNextRotation()}calculateTransformValue(e){return`translateX(${-(e-Math.floor(this.visibleItemsCount()/2))*100/this.visibleItemsCount()}%)`}applyTransform(e){this.renderer.setStyle(this.carouselList,"transition",""),this.renderer.setStyle(this.carouselList,"transition",`transform ${this.currentSpeed()}s ease-in-out`),this.renderer.setStyle(this.carouselList,"transform",e)}scheduleTransformReset(){let e=performance.now(),t=this.currentSpeed()*1e3,s=o=>{if(o-e>=t){let M=this.calculateTransformValue(this.currentIndex());this.resetTransform(M),this.removeFirstItem()}else requestAnimationFrame(s)};requestAnimationFrame(s)}resetTransform(e){this.renderer.setStyle(this.carouselList,"transition","none"),this.renderer.setStyle(this.carouselList,"transform",e)}removeFirstItem(){this.items().shift()}scheduleNextRotation(){let e=performance.now(),t=this.currentSpeed()*1500,s=o=>{o-e>=t?this.handleEndOfRotation():requestAnimationFrame(s)};requestAnimationFrame(s)}handleEndOfRotation(){if(this.hasCompletedCycle()){this.resetCycle(),this.updateIndexForSelectedItem(),this.calculateDifferenceBetweenSelectedAndCurrent(),this.alignToSelectedItem();return}this.incrementCycleCounter(),this.adjustSpeedIfNecessary(),this.move()}hasCompletedCycle(){return this.counterForDoOneCycle()===this.itemsNumber()}resetCycle(){this.counterForChangeSpeed.set(0),this.index.update(e=>e%this.itemsNumber())}updateIndexForSelectedItem(){this.selectedItemIndex()<=this.index()&&this.selectedItemOffset.set(this.selectedItemIndex()+this.itemsNumber())}calculateDifferenceBetweenSelectedAndCurrent(){this.differenceBetweenRightAndSelected.set(Math.round((this.selectedItemOffset()-this.index())/10))}alignToSelectedItem(){this.incrementIndex(),this.shiftAndAppendItem(),this.applyStylesForNewItems(),this.animateCarousel(),this.scheduleAlignment()}incrementCycleCounter(){this.counterForDoOneCycle.update(e=>e+1)}adjustSpeedIfNecessary(){this.counterForChangeSpeed()===Math.round(this.itemsNumber()/10)&&(this.counterForChangeSpeed.set(0),this.currentSpeed.update(e=>Math.max(this.maxSpeed(),e-this.stepSpeed()))),this.counterForChangeSpeed.update(e=>e+1)}move(){this.incrementIndex(),this.shiftAndAppendItem(),this.applyStylesForNewItems(),this.performFullRotation()}animateCarousel(){let e=this.calculateTransformValue(this.currentIndex()+1);this.applyTransform(e);let t=performance.now(),s=this.currentSpeed()*1e3,o=u=>{if(u-t>=s){let te=this.calculateTransformValue(this.currentIndex());this.resetTransform(te),this.removeFirstItem()}else requestAnimationFrame(o)};requestAnimationFrame(o)}scheduleAlignment(){let e=performance.now(),t=this.currentSpeed()*1500,s=o=>{o-e>=t?(this.handleSpeedAdjustment(),this.checkAlignmentOrEnd()):requestAnimationFrame(s)};requestAnimationFrame(s)}handleSpeedAdjustment(){this.shouldAdjustSpeed()&&(this.resetSpeedCounter(),this.increaseSpeed()),this.incrementSpeedCounter()}checkAlignmentOrEnd(){this.isNotAlignedWithSelectedItem()?this.alignToSelectedItem():this.finalizeAlignment()}shouldAdjustSpeed(){return this.counterForChangeSpeed()===this.differenceBetweenRightAndSelected()}resetSpeedCounter(){this.counterForChangeSpeed.set(0)}increaseSpeed(){this.currentSpeed.update(e=>Math.min(this.minSpeed(),e+this.stepSpeed()))}incrementSpeedCounter(){this.counterForChangeSpeed.update(e=>e+1)}isNotAlignedWithSelectedItem(){return this.index()!==this.selectedItemOffset()}finalizeAlignment(){this.showDialog.set(!0),this.enableButton.set(!0)}isCenterItem(e){let t=this.calculateCenterIndex(),s=this.getCurrentCenterIndex();return this.isItemAtCenter(e,s,t)}calculateCenterIndex(){return Math.floor(this.visibleItemsCount()/Math.floor(this.visibleItemsCount()/2))}getCurrentCenterIndex(){return this.visibleItemsCount()<5?(this.currentIndex()-3+this.calculateCenterIndex())%this.ourDate().length:(this.currentIndex()-2+this.calculateCenterIndex())%this.ourDate().length}isItemAtCenter(e,t,s){return this.items()[0].key===0?e===t+1:e===t}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var se=["dialog"],re=["carouselList"],oe=n=>({disabled:n});function ae(n,i){if(n&1&&(a(0,"li",12)(1,"div",13),d(2),l()()),n&2){let I=i.$implicit,e=i.$index,t=F(2);c(),y("bigger",t.isCenterItem(e)),c(),T(" ",I.key," ")}}function le(n,i){if(n&1&&N(0,ae,3,3,"li",12,L),n&2){let I=F();E(I.items())}}function ce(n,i){n&1&&(a(0,"li"),d(1,"There are no Items !"),l())}function de(n,i){n&1&&(a(0,"p"),d(1,"Congratulations! You've selected the winning block."),l())}function he(n,i){n&1&&(a(0,"p"),d(1,"Please try again."),l())}var G=(()=>{let i=class i{constructor(e,t,s){this.renderer=e,this.dialogService=t,this.carouselService=s,this.items=h(()=>this.carouselService.items()),this.selectedItemIndex=h(()=>this.carouselService.selectedItemIndex()),this.isWinner=h(()=>this.carouselService.isWinner()),this.dialogTitle=h(()=>this.carouselService.dialogTitle()),this.showDialog=h(()=>this.carouselService.showDialog()),this.enableButton=h(()=>this.carouselService.enableButton()),this.dialog=v("dialog"),this.carouselList=v("carouselList"),q(()=>{this.showDialog()?this.openDialog():this.closeDialog()})}ngOnInit(){this.initCarousel()}initCarousel(){this.carouselService.initCarousel(this.getCarouselList,this.renderer)}start(){this.carouselService.start()}get getCarouselList(){return this.carouselList()?.nativeElement}get dialogElement(){return this.dialog()?.nativeElement}isCenterItem(e){return this.carouselService.isCenterItem(e)}closeDialog(){this.dialogService.closeDialog(this.dialogElement)}openDialog(){this.dialogService.openDialog(this.dialogElement)}};i.\u0275fac=function(t){return new(t||i)(g(O),g(Y),g(Z))},i.\u0275cmp=f({type:i,selectors:[["app-slider"]],viewQuery:function(t,s){t&1&&(A(s.dialog,se,5),A(s.carouselList,re,5)),t&2&&P(2)},standalone:!0,features:[C],decls:23,vars:10,consts:[["carouselList",""],["dialog",""],[1,"carousel"],[1,"carousel__scene"],[1,"carousel__list"],[1,"arrow-container"],[1,"arrow"],[1,"carousel__controls"],[1,"button-container"],[3,"click","disabled","ngClass"],[1,"dialog"],[2,"width","8rem",3,"click"],[1,"carousel__cell"],[1,"carousel__item"]],template:function(t,s){if(t&1){let o=R();a(0,"div",2)(1,"div",3)(2,"ul",4,0),b(4,le,2,0)(5,ce,2,0,"li"),l()(),a(6,"div",5),m(7,"div",6),l(),m(8,"div",7),a(9,"div",8)(10,"button",9),w("click",function(){return x(o),S(s.start())}),d(11,"Start"),l()()(),a(12,"dialog",10,1)(14,"h1"),d(15),l(),a(16,"p"),d(17),l(),b(18,de,2,0,"p")(19,he,2,0,"p"),a(20,"div",8)(21,"button",11),w("click",function(){return x(o),S(s.closeDialog())}),d(22,"Close"),l()()()}t&2&&(c(4),_(s.items()?4:5),c(6),k("disabled",!s.enableButton())("ngClass",j(8,oe,!s.enableButton())),c(2),y("show",s.showDialog()),c(3),V(s.dialogTitle()),c(2),T("The index for your selected item: ",s.selectedItemIndex(),""),c(),_(s.isWinner()?18:19))},dependencies:[$],styles:[".carousel[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:66.666667%;margin:20px auto 0;padding:16px;border-width:2px;border-color:#e5e7eb;box-shadow:0 4px 6px #0000001a;border-radius:.375rem}.carousel__scene[_ngcontent-%COMP%]{width:100%;height:100%;margin-top:16px;margin-bottom:16px}.carousel__list[_ngcontent-%COMP%]{display:flex;list-style:none;padding:0;margin:0}.carousel__controls[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px}button[_ngcontent-%COMP%]{background-color:#28a745;width:80px;color:#fff;font-weight:700;border-radius:.375rem;box-shadow:0 4px 6px #0000001a;padding:8px;cursor:pointer;border:none}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-top:16px;margin-bottom:16px}.button-container[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{background-color:#41e066;cursor:not-allowed;opacity:.6}.carousel__item[_ngcontent-%COMP%]{padding:12px;box-shadow:0 4px 6px #0000001a;border-radius:.375rem;border-width:2px;border-color:#e5e7eb;width:90px;text-align:center;font-size:3rem;font-weight:700;transition:transform .3s ease-in-out}.carousel__item.bigger[_ngcontent-%COMP%]{transform:scale(1.5)}dialog[_ngcontent-%COMP%]{border-radius:20px;border:none;text-align:center;opacity:0;transition:transform .3s ease-in-out,opacity .3s ease-in-out}.dialog.show[_ngcontent-%COMP%]{opacity:1}dialog[_ngcontent-%COMP%]::backdrop{background-color:#afacac40}.arrow-container[_ngcontent-%COMP%]{position:absolute;top:10px;left:50%;transform:translate(-50%);pointer-events:none}.arrow[_ngcontent-%COMP%]{width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid black}.carousel__cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-align:center;box-sizing:border-box;width:20%;height:100px;transition:filter .3s ease,transform .3s ease}"]});let n=i;return n})();var J=(()=>{let i=class i{constructor(){this.title="angular-slider"}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=f({type:i,selectors:[["app-root"]],standalone:!0,features:[C],decls:1,vars:0,template:function(t,s){t&1&&m(0,"app-slider")},dependencies:[G]});let n=i;return n})();var K=[];var U={providers:[B({eventCoalescing:!0}),H(K),Q()]};var ue={providers:[X()]},ee=W(U,ue);var me=()=>z(J,ee),Ee=me;export{Ee as a};
